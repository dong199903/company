<!DOCTYPE html>
<html>
<head>
	<title></title>
</head>
<body>
<script type="text/javascript">
	/*
	订阅发布
	*/
	class Sub{
		constructor(){
			this.events={};
		}
		subscribe(type,fn){
			if(!this.events[type])
				this.events[type]=[];
			this.events[type].push(fn);
		}
		publish(type){
			if(this.events[type]){
				for(let item of this.events[type]){
					item();
				}
			}
		}
		removeEvent(type,fn){
			if(this.events[type]){
				let index = this.events[type].indexOf(fn);
				this.events[type].splice(index,1);
				if(this.events[type].length===0)
					delete this.events[type];
			}

		}
		removeEventAll(type){
			if(this.events[type])
				delete this.events[type];
		}
	}

	let sub = new Sub();
	sub.subscribe("dom1",function(){console.log("dom1 click1")});
	sub.subscribe("dom1",function(){console.log("dom1 click2")});
	sub.subscribe("dom2",function(){console.log("dom2 click1")});
	sub.publish("dom1");
</script>
</body>
</html>