<!DOCTYPE html>
<html>
<head>
	<title></title>
</head>
<body>
<script type="text/javascript">
	/*
	Ajax
	*/
	function ajaxGet(url,data){
		return new Promise(function(resolve,reject){
			//1.
			const xhr = new XMLHttpRequest();

			//2.封装url
			url = url + '?';
			for(let k in data){
				url = url + k + '=' + data[k] + '&';
			}
			url = url.slice(0,url.length-1);
			console.log(url);

			//3.绑定数据
			xhr.open("GET",url,true);
			//3.设置请求头
			xhr.setRequestHeader("Content-Type", "application/json");


			//4.发送数据
			xhr.send();

			//5.监听状态
			xhr.onreadystatechange = function(e){
				if (xhr.readyState==4 && xhr.status==200)
			    {
			    	//resolve(xhr.responseText);
			    	//5.获取数据
			        console.log(xhr.responseText);
			    }else{
			    	console.log('error');
			    	//reject('error');
			    }	
			}
		})
	}
	
	ajaxGet('./index.php',{name:'dzp',age:22}).then((message)=>{
		console.log(message);
	}).catch((error)=>{
		console.log(error);
	});
</script>
</body>
</html>