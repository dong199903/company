<!DOCTYPE html>
<html>
<head>
	<title></title>
</head>
<body>
	<script type="text/javascript">
		/*
		订阅发布：
		订阅者：订阅事件，绑定回调函数。一个事件可以绑定多个回调函数。
		发布者：触发后，通知所有的订阅者执行回调函数
		*/

		class Order{
			constructor(){
				this.events = {};
			}
			//订阅事件
			on(name,callback){
				if(!this.events[name]){
					this.events[name]=[];
				}
				this.events[name].push(callback);
				
			}

			//发布事件,后面的参数是回调函数的
			emit(name,...val){
				const callbacks = this.events[name];
				callbacks.forEach(item=>{
					item(...val);
				})
			}
			//删除事件
			del(name,callback){
				let cal = this.events[name];
				if(cal){
					let index = cal.indexOf(callback);
					if(index!==-1){
						cal.splice(index,1);
					}
				}
			}
		}
		let ord = new Order();
		let f1 = (desc,age)=>{console.log("1-1:desc:",desc,"age:",age)}
		let f2 = (desc,age)=>{console.log("1-2:desc:",desc,"age:",age)}
		ord.on("1",f1);
		ord.on("1",f2);
		ord.emit("1","dzp",22);
		
		ord.del("1",f1);
		ord.emit(1,"dzp",23);
	</script>
</body>
</html>