<!DOCTYPE html>
<html>
<head>
	<title></title>
</head>
<body>
<script type="text/javascript">

	/*


	*/

	 // 转换前：
    let source = [
    	{
            id: 1,
            pid: 0,
            name: 'body'
        }, 
        {
            id: 2,
            pid: 1,
            name: 'title'
        },
        {
            id: 3,
            pid: 2,
            name: 'div'
        }
    ];
	function jsonToTree(data,fid,list) {
		for(let item of data){
			if(item.pid===fid){
				list.push(item);
			}
		}
		
		for(let item of list){
			item.children=[];
			jsonToTree(data,item.id,item.children);
			if(item.children.length===0)
				delete item.children;
		}
		return list;
	}
	console.log(jsonToTree(source,0,[]));

</script>
</body>
</html>